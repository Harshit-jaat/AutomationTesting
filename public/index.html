<!DOCTYPE html>
<html lang="en">
<head>
    <title>Binogi Test Automation</title>
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h2>ðŸ“± Binogi Test Automation</h2>  
        
        <div class="box-1">

        <div class="box-2">
        <!-- Custom File Input -->
        <label for="apkInput" class="upload-label">ðŸ“‚ Choose APK</label>
        <input type="file" id="apkInput">

        <!-- Action Buttons -->
        <button class="upload-btn" onclick="uploadAPK()">ðŸš€ Upload APK</button>
        <button class="start-btn" onclick="startTest()">â–¶ Start Test</button>
        <button class="stop-btn" onclick="stopTest()">â›” Stop Test</button>
        <button class="clear-btn" onclick="clearLogs()">ðŸ§¹ Clear Logs</button>
        </div>
        <div class="box-3">
        <h3>Test Execution Logs</h3>
        <pre id="testOutput"></pre>
        </div>
        </div>
    </div>

    <script>
        function uploadAPK() {
            const file = document.getElementById("apkInput").files[0];
            const formData = new FormData();
            formData.append("apk", file);

            fetch("/upload", { method: "POST", body: formData })
                .then(response => response.json())
                .then(data => alert(data.message))
                .catch(error => console.error(error));
        }

        function startTest() {
            fetch("/test/start", { method: "POST" })
                .then(response => response.json())
                .then(data => console.log(data.message))
                .catch(error => console.error(error));
        }

        function stopTest() {
            fetch("/test/stop", { method: "POST" })
                .then(response => response.json())
                .then(data => console.log(data.message))
                .catch(error => console.error(error));
        }

        function clearLogs() {
            document.getElementById("testOutput").textContent = "";
        }

        // WebSocket for Real-time Updates
        const ws = new WebSocket("ws://localhost:8081");

        ws.onmessage = function(event) {
            document.getElementById("testOutput").textContent += event.data + "\n";
        };
    </script>
</body>
</html>
